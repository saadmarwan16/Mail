{"version":3,"sources":["actions/auth.js","actions/alert.js","components/Auth.js","containers/Register.js"],"names":["login","email","password","dispatch","a","config","headers","body","JSON","stringify","axios","post","process","res","type","LOGIN_SUCCESS","payload","data","setAlert","LOGIN_FAIL","signup","name","confirmation","SIGNUP_SUCCESS","SIGNUP_FAIL","logout","LOGOUT","msg","alertType","timeout","id","uuid","SET_ALERT","setTimeout","REMOVE_ALERT","Auth","formDetails","submitValue","onSubmit","map","item","index","className","autoFocus","isAutoFocus","placeholder","value","onChange","connect","state","isAuthenticated","auth","useState","formData","setFormData","e","target","to","content","preventDefault","length"],"mappings":"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","file":"static/js/10.efd67a74.chunk.js","sourcesContent":["import axios from 'axios'\r\nimport { setAlert } from './alert'\r\nimport {\r\n    SIGNUP_SUCCESS,\r\n    SIGNUP_FAIL,\r\n    LOGIN_SUCCESS,\r\n    LOGIN_FAIL,\r\n    LOGOUT,\r\n} from './types'\r\n\r\nexport const login = (email, password) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }\r\n\r\n    const body = JSON.stringify({ email, password })\r\n\r\n    try {\r\n        const res = await axios.post(`${process.env.REACT_APP_API_ROOT_URL}/api/token/`, body, config)\r\n\r\n        dispatch({\r\n            type: LOGIN_SUCCESS,\r\n            payload: res.data,\r\n            email: email\r\n        })\r\n\r\n        dispatch(setAlert('Login successful', 'success'))\r\n    } catch (err) {\r\n        dispatch({\r\n            type: LOGIN_FAIL\r\n        })\r\n\r\n        dispatch(setAlert('Oops! Login failed', 'danger'))\r\n    }\r\n}\r\n\r\nexport const signup = ({ name, email, password, confirmation }) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }\r\n\r\n    const body = JSON.stringify({ name, email, password, confirmation })\r\n\r\n    try {\r\n        const res = await axios.post(`${process.env.REACT_APP_API_ROOT_URL}/api/accounts/signup`, body, config)\r\n\r\n        dispatch({\r\n            type: SIGNUP_SUCCESS,\r\n            payload: res.data\r\n        })\r\n\r\n        dispatch(login(email, password))\r\n    } catch (err) {\r\n        dispatch({\r\n            type: SIGNUP_FAIL\r\n        })\r\n\r\n        dispatch(setAlert('Oops! Registration failed', 'danger'))\r\n    }\r\n}\r\n\r\nexport const logout = () => dispatch => {\r\n    dispatch(setAlert('Logout successful', 'success'))\r\n    dispatch({ type: LOGOUT, email: null })\r\n}","import { v4 as uuid } from 'uuid'\r\nimport { SET_ALERT, REMOVE_ALERT } from './types'\r\n\r\nexport const setAlert = (msg, alertType, timeout = 5000) => dispatch => {\r\n    const id = uuid()\r\n    dispatch({\r\n        type: SET_ALERT,\r\n        payload: { msg, alertType, id }\r\n    })\r\n\r\n    setTimeout(() => dispatch({ type: REMOVE_ALERT, payload: id }), timeout)\r\n}","import React from 'react'\r\n\r\nconst Auth = ({ formDetails, submitValue, onSubmit }) => {\r\n    return (\r\n        <>\r\n            <form onSubmit={onSubmit}>\r\n                {formDetails.map((item, index) => {\r\n                    return (\r\n                        <div className=\"form-group\" key={index}>\r\n                            <input autoFocus={item.isAutoFocus} \r\n                                className=\"form-control auth__subsection__subsection__form__input\"\r\n                                type={item.type} placeholder={item.placeholder} name={item.name}\r\n                                value={item.value} onChange={item.onChange} \r\n                            />\r\n                        </div>\r\n                    )\r\n                })}\r\n                \r\n                <input className=\"btn btn-primary auth__subsection__subsection__form__btn\" type=\"submit\" \r\n                    value={submitValue} \r\n                />\r\n            </form>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Auth","import React, { useState } from 'react'\r\nimport { Link, Redirect } from 'react-router-dom'\r\nimport { Helmet } from 'react-helmet'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport { signup } from '../actions/auth'\r\nimport Auth from '../components/Auth'\r\nimport { setAlert } from '../actions/alert'\r\n\r\nconst Register = ({ setAlert, signup, isAuthenticated }) => {\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        confirmation: ''\r\n    })\r\n\r\n    const { name, email, password, confirmation } = formData\r\n\r\n    const onChange = e => setFormData({ ...formData, [e.target.name]: e.target.value })\r\n\r\n    const formDetails = [\r\n        {\r\n            isAutoFocus: true,\r\n            type: 'text',\r\n            placeholder: 'Full name',\r\n            name: 'name',\r\n            value: name,\r\n            onChange: onChange\r\n        },\r\n        {\r\n            isAutoFocus: false,\r\n            type: 'email',\r\n            placeholder: 'Email Address',\r\n            name: 'email',\r\n            value: email,\r\n            onChange: onChange\r\n        },\r\n        {\r\n            isAutoFocus: false,\r\n            type: 'password',\r\n            placeholder: 'Password',\r\n            name: 'password',\r\n            value: password,\r\n            onChange: onChange\r\n        },\r\n        {\r\n            isAutoFocus: false,\r\n            type: 'password',\r\n            placeholder: 'Password Again',\r\n            name: 'confirmation',\r\n            value: confirmation,\r\n            onChange: onChange\r\n        }\r\n    ]\r\n\r\n    const onSubmit = e => {\r\n        e.preventDefault()\r\n\r\n        if (password !== confirmation) {\r\n            setAlert('Oops! Passwords do not match', 'danger')\r\n        } else if (password.length < 8) {\r\n            setAlert('Oops! Password must contain at least 8 characters', 'danger')\r\n        } else {\r\n            signup({ name, email, password, confirmation })\r\n        }\r\n    }\r\n\r\n    if (isAuthenticated) {\r\n        return <Redirect to=\"/inbox\" /> \r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid auth\">\r\n            <Helmet>\r\n                <title>Register - Mail</title>\r\n\r\n                <meta name=\"Register to get the best messaging experience\" content=\"registration page\" />\r\n            </Helmet>\r\n\r\n            <div className=\"auth__subsection\">\r\n                <div className=\"auth__subsection__subsection\">\r\n                    <div className=\"auth__subsection__subsection__form\">\r\n                        <h2 className=\"auth__subsection__subsection__form__heading\">Register</h2>\r\n\r\n                        <Auth\r\n                            formDetails={formDetails} \r\n                            submitValue=\"Register\" \r\n                            onSubmit={onSubmit} \r\n                        />\r\n                    \r\n                        <small className=\"auth__subsection__subsection__form__small\">\r\n                            Already have an account? \r\n                            <Link className=\"auth__subsection__subsection__form__small__link\" \r\n                                to=\"/login\"\r\n                            >\r\n                                Login\r\n                            </Link>\r\n                        </small>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nRegister.propTypes = {\r\n    setAlert: PropTypes.func.isRequired,\r\n    signup: PropTypes.func.isRequired,\r\n    isAuthenticated: PropTypes.bool\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    isAuthenticated: state.auth.isAuthenticated,\r\n})\r\n\r\nexport default connect(mapStateToProps, { setAlert, signup })(Register)"],"sourceRoot":""}