{"version":3,"sources":["actions/auth.js","actions/alert.js","components/Navbar.js","hocs/Layout.js","scripts/interactionsSingleMail.js","containers/SingleMail.js"],"names":["login","email","password","dispatch","a","config","headers","body","JSON","stringify","axios","post","process","res","type","LOGIN_SUCCESS","payload","data","setAlert","LOGIN_FAIL","signup","name","confirmation","SIGNUP_SUCCESS","SIGNUP_FAIL","logout","LOGOUT","msg","alertType","timeout","id","uuid","SET_ALERT","setTimeout","REMOVE_ALERT","connect","state","auth","className","exact","to","onClick","Layout","props","children","onMarkClick","action","localStorage","getItem","put","then","_res","_err","onUnmarkClick","SingleMail","match","params","mailbox","useState","setEmail","isActionCompleted","setIsActionCompleted","onIconClick","e","target","innerText","useEffect","get","recipients","join","replace","fetchEmail","Helmet","subject","c","toUpperCase","content","title","sender","timestamp"],"mappings":"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","file":"static/js/12.34c88f4d.chunk.js","sourcesContent":["import axios from 'axios'\r\nimport { setAlert } from './alert'\r\nimport {\r\n    SIGNUP_SUCCESS,\r\n    SIGNUP_FAIL,\r\n    LOGIN_SUCCESS,\r\n    LOGIN_FAIL,\r\n    LOGOUT,\r\n} from './types'\r\n\r\nexport const login = (email, password) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }\r\n\r\n    const body = JSON.stringify({ email, password })\r\n\r\n    try {\r\n        const res = await axios.post(`${process.env.REACT_APP_API_ROOT_URL}/api/token/`, body, config)\r\n\r\n        dispatch({\r\n            type: LOGIN_SUCCESS,\r\n            payload: res.data,\r\n            email: email\r\n        })\r\n\r\n        dispatch(setAlert('Login successful', 'success'))\r\n    } catch (err) {\r\n        dispatch({\r\n            type: LOGIN_FAIL\r\n        })\r\n\r\n        dispatch(setAlert('Oops! Login failed', 'danger'))\r\n    }\r\n}\r\n\r\nexport const signup = ({ name, email, password, confirmation }) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }\r\n\r\n    const body = JSON.stringify({ name, email, password, confirmation })\r\n\r\n    try {\r\n        const res = await axios.post(`${process.env.REACT_APP_API_ROOT_URL}/api/accounts/signup`, body, config)\r\n\r\n        dispatch({\r\n            type: SIGNUP_SUCCESS,\r\n            payload: res.data\r\n        })\r\n\r\n        dispatch(login(email, password))\r\n    } catch (err) {\r\n        dispatch({\r\n            type: SIGNUP_FAIL\r\n        })\r\n\r\n        dispatch(setAlert('Oops! Registration failed', 'danger'))\r\n    }\r\n}\r\n\r\nexport const logout = () => dispatch => {\r\n    dispatch(setAlert('Logout successful', 'success'))\r\n    dispatch({ type: LOGOUT, email: null })\r\n}","import { v4 as uuid } from 'uuid'\r\nimport { SET_ALERT, REMOVE_ALERT } from './types'\r\n\r\nexport const setAlert = (msg, alertType, timeout = 5000) => dispatch => {\r\n    const id = uuid()\r\n    dispatch({\r\n        type: SET_ALERT,\r\n        payload: { msg, alertType, id }\r\n    })\r\n\r\n    setTimeout(() => dispatch({ type: REMOVE_ALERT, payload: id }), timeout)\r\n}","import React from 'react'\r\nimport { Link, NavLink } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport { logout } from '../actions/auth'\r\n\r\nconst Navbar = ({ logout, email }) => {\r\n    return (\r\n        <>\r\n            <h2 className=\"main__owner-address\">{email}</h2>\r\n\r\n            <NavLink className=\"btn btn-sm btn-outline-primary main__nav-btn\" exact to=\"/inbox\">\r\n                Inbox\r\n            </NavLink>\r\n            <NavLink className=\"btn btn-sm btn-outline-primary main__compose-btn\" to=\"/compose\">\r\n                Compose\r\n            </NavLink>\r\n            <NavLink className=\"btn btn-sm btn-outline-primary main__nav-btn\" to=\"/sent\">\r\n                Sent\r\n            </NavLink>\r\n            <NavLink className=\"btn btn-sm btn-outline-primary main__nav-btn\" to=\"/archive\">\r\n                Archive\r\n            </NavLink>\r\n            <NavLink className=\"btn btn-sm btn-outline-primary main__nav-btn\" to=\"/trash\">\r\n                Trash\r\n            </NavLink>\r\n            <Link className=\"btn btn-sm btn-outline-primary main__logout-btn\" to=\"/logout\" onClick={logout}>\r\n                Log Out\r\n            </Link>\r\n\r\n            <hr className=\"main__seperator\" />\r\n        </>\r\n    )\r\n}\r\n\r\nNavbar.propTypes = {\r\n    logout: PropTypes.func.isRequired,\r\n    email: PropTypes.string.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => ({ email: state.auth.email })\r\n\r\nexport default connect(mapStateToProps, { logout })(Navbar)","import React from 'react'\r\nimport Navbar from '../components/Navbar'\r\n\r\nconst Layout = (props) => {\r\n    return (\r\n        <div>\r\n            <div className=\"main\">\r\n                <div className=\"container\">\r\n                    <Navbar />\r\n\r\n                    <div className=\"container\">\r\n                        {props.children}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Layout","import axios from 'axios'\r\n\r\nexport function onMarkClick(id, action) {\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n    } \r\n    \r\n    const body = JSON.stringify({\r\n        [action]: true\r\n    })\r\n\r\n    try {\r\n        axios.put(`${process.env.REACT_APP_API_ROOT_URL}/api/emails/email/${id}`, body, config)\r\n        .then(_res => {})\r\n    } catch(_err) {}\r\n}\r\n\r\nexport function onUnmarkClick(id, action) {\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n    }\r\n\r\n    const body = JSON.stringify({\r\n        [action]: false\r\n    })\r\n\r\n    try {\r\n        axios.put(`${process.env.REACT_APP_API_ROOT_URL}/api/emails/email/${id}`, body, config)\r\n        .then(_res => {})\r\n    } catch(_err) {}\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { Link, Redirect } from 'react-router-dom'\r\nimport { Helmet } from 'react-helmet'\r\nimport axios from 'axios'\r\nimport Layout from '../hocs/Layout'\r\nimport { onMarkClick, onUnmarkClick } from '../scripts/interactionsSingleMail'\r\n\r\nconst SingleMail = (props) => {\r\n    const id = props.match.params.id\r\n    const mailbox = props.match.params.mailbox\r\n\r\n    const [email, setEmail] = useState({})\r\n    const [isActionCompleted, setIsActionCompleted] = useState(false)\r\n\r\n    const onIconClick = e => {\r\n        if (e.target.innerText === 'delete') {\r\n            onMarkClick(id, 'trashed')\r\n        } else if (e.target.innerText === 'restore_from_trash') {\r\n            onUnmarkClick(id, 'trashed')\r\n        } else if (e.target.innerText === 'archive') {\r\n            onMarkClick(id, 'archived')\r\n        } else if (e.target.innerText === 'unarchive') {\r\n            onUnmarkClick(id, 'archived')\r\n        } else if (e.target.innerText === 'mark_email_unread') {\r\n            onUnmarkClick(id, 'read')\r\n        }\r\n\r\n        setIsActionCompleted(true)\r\n    }\r\n\r\n    useEffect(() => {\r\n        const fetchEmail = () => {\r\n            const config = {\r\n                headers: {\r\n                    'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n                }\r\n            }\r\n\r\n            try {\r\n                axios.get(`${process.env.REACT_APP_API_ROOT_URL}/api/emails/email/${id}`, config)\r\n                .then(res => {\r\n                    res.data.recipients = res.data.recipients.join()\r\n                    res.data.recipients = res.data.recipients.replace(',', ', ')\r\n                    setEmail(res.data)\r\n                })\r\n            } catch(_err) {}\r\n        }\r\n\r\n        fetchEmail()\r\n    }, [id])\r\n\r\n    if (isActionCompleted) return <Redirect to={`/${mailbox}`} />\r\n\r\n    return (\r\n        <Layout>\r\n            <Helmet>\r\n                <title>{`${email.subject} | ${mailbox.replace(/^\\w/, (c) => c.toUpperCase())} - Mail`}</title>\r\n\r\n                <meta name=\"Access a mail here\" content=\"Single mail page\" />\r\n            </Helmet>\r\n\r\n            <div className=\"container\">\r\n                <div>\r\n                    <div className=\"row main__commands\">\r\n                        <div>\r\n                            <Link className=\"main__commands__icon\" title=\"Go back\" to={`/${mailbox}`}>\r\n                                <i className=\"material-icons main__commands__icon__inner\">west</i>\r\n                            </Link>\r\n\r\n                            {mailbox === 'archive' || mailbox === 'trash' ? null : (\r\n                                <button className=\"main__commands__icon\" title=\"Delete\" onClick={onIconClick}>\r\n                                    <i className=\"material-icons main__commands__icon__inner\">delete</i>\r\n                                </button>\r\n                            )}\r\n\r\n                            {mailbox === 'trash' ? (\r\n                                <button className=\"main__commands__icon\" title=\"Restore from trash\" onClick={onIconClick}>\r\n                                    <i className=\"material-icons main__commands__icon__inner\">restore_from_trash</i>\r\n                                </button>\r\n                            ) : null}\r\n                            \r\n                            \r\n                            <button className=\"main__commands__icon\" title=\"Mark as unread\" onClick={onIconClick}>\r\n                                <i className=\"material-icons main__commands__icon__inner\">mark_email_unread</i>\r\n                            </button>\r\n\r\n                            {mailbox === 'trash' || mailbox === 'sent' || mailbox === 'archive' ? null : (\r\n                                <button className=\"main__commands__icon\" title=\"Archive\" onClick={onIconClick}>\r\n                                    <i className=\"material-icons main__commands__icon__inner\">archive</i>\r\n                                </button>\r\n                            )}\r\n\r\n                            {mailbox === 'archive' ? (\r\n                                <button className=\"main__commands__icon\" title=\"Unarchive\" onClick={onIconClick}>\r\n                                    <i className=\"material-icons main__commands__icon__inner\">unarchive</i>\r\n                                </button>\r\n                            ) : null}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row main__subject-reply\">\r\n                        <h2>{email.subject}</h2>\r\n                        <Link title=\"Reply\" className=\"main__commands__icon\" to=\"/compose\">\r\n                            <i className=\"material-icons main__commands__icon__inner\">reply</i>\r\n                        </Link>\r\n                    </div>\r\n                    <div className=\"main__meta\">\r\n                        <div className=\"main__meta__sender\">Sender: {email.sender}</div>\r\n                        <div className=\"main__meta__recipients\">Recipient(s): {email.recipients}</div>\r\n                        <div className=\"main__meta__timestamp\">\r\n                            <small>Timestamp: {email.timestamp}</small>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row main__body jumbotron\">\r\n                        <p className=\"main__body__content\">{email.body}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default SingleMail"],"sourceRoot":""}