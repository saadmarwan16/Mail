(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{209:function(e,t){},211:function(e,t){},225:function(e,t){},227:function(e,t){},255:function(e,t){},257:function(e,t){},258:function(e,t){},263:function(e,t){},265:function(e,t){},284:function(e,t){},296:function(e,t){},299:function(e,t){},316:function(e,t,a){},317:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(156),r=a.n(c),i=a(12),o=a(13),l=a(320),m=a(61),u=a(11),d=a(16),j=a(322),b=a(26),h=a.n(b),_=a(9),p=a.n(_),x=a(7),O=a(17),g=a(321),f=a(18),v=a(20),N=a.n(v),y=function(){var e=Object(O.a)(p.a.mark((function e(t){var a,n,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.action,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}},c=JSON.stringify(Object(f.a)({},n,!0)),e.next=5,N.a.put("".concat("https://mail914.herokuapp.com","/api/emails/email/").concat(a),c,s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(O.a)(p.a.mark((function e(t){var a,n,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.action,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}},c=JSON.stringify(Object(f.a)({},n,!1)),e.next=5,N.a.put("".concat("https://mail914.herokuapp.com","/api/emails/email/").concat(a),c,s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=a(0),k=function(e){var t=e.data,a=e.isFetching,n=e.isFetchingNextPage,c=e.fetchNextPage,r=e.hasNextPage,o=e.mailboxCap,l=e.mailbox,u="inbox"===l?l:l+" mailbox",d=Object(m.b)(),j=Object(g.a)(y,{onMutate:function(){var e=Object(O.a)(p.a.mark((function e(t){var a,n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target,a=t.id,n=t.action,d.cancelQueries([o,l]),s=d.getQueryData([o,l]),d.setQueryData([o,l],(function(e){return"read"===n?Object(x.a)(Object(x.a)({},e),{},{pages:e.pages.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{body:e.body.map((function(e){return e.id===a?Object(x.a)(Object(x.a)({},e),{},{read:!0}):e}))})}))}):Object(x.a)(Object(x.a)({},e),{},{pages:e.pages.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{body:e.body.filter((function(e){return e.id!==a}))})}))})})),e.abrupt("return",{previousMails:s});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,a){d.setQueryData([o,l],a.previousMails)},onSettled:function(){d.invalidateQueries([o,l])}}).mutateAsync,b=Object(g.a)(w,{onMutate:function(){var e=Object(O.a)(p.a.mark((function e(t){var a,n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target,a=t.id,n=t.action,d.cancelQueries([o,l]),s=d.getQueryData([o,l]),d.setQueryData([o,l],(function(e){return"read"===n?Object(x.a)(Object(x.a)({},e),{},{pages:e.pages.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{body:e.body.map((function(e){return e.id===a?Object(x.a)(Object(x.a)({},e),{},{read:!1}):e}))})}))}):Object(x.a)(Object(x.a)({},e),{},{pages:e.pages.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{body:e.body.filter((function(e){return e.id!==a}))})}))})})),e.abrupt("return",{previousMails:s});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,a){d.setQueryData([o,l],a.previousMails)},onSettled:function(){d.invalidateQueries([o,l])}}).mutateAsync;return window.onscroll=function(){window.innerHeight+window.scrollY>=document.body.offsetHeight&&r&&c()},Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:"list-group",children:t.pages.map((function(e,a){return Object(A.jsx)(s.a.Fragment,{children:t.pages.length<=1&&0===e.body.length?Object(A.jsxs)("div",{className:"main__empty",children:["Your ",u," is empty"]}):e.body.map((function(e){return Object(A.jsxs)(i.b,{className:"main__mail ".concat(e.read?"main__read":""),to:"/".concat(l,"/").concat(e.id),onClick:function(t){return function(e,t){if(e.target.classList.contains("main__mail__content__icons__icon")){e.preventDefault();var a=e.target.parentNode.parentNode.parentNode.parentNode;"delete"===e.target.innerText||"archive"===e.target.innerText||"mark_email_read"===e.target.innerText?j({target:a,id:t,action:"".concat("delete"===e.target.innerText?"trashed":"archive"===e.target.innerText?"archived":"read")}):b({target:a,id:t,action:"".concat("restore_from_trash"===e.target.innerText?"trashed":"unarchive"===e.target.innerText?"archived":"read")})}}(t,e.id)},children:[Object(A.jsxs)("div",{className:"main__mail__sender-timestamp",children:[Object(A.jsx)("div",{className:"main__mail__sender-timestamp__sender",children:e.sender}),Object(A.jsx)("div",{className:"main__mail__sender-timestamp__timestamp",children:Object(A.jsx)("small",{children:e.timestamp})})]}),Object(A.jsxs)("div",{className:"main__mail__content",children:[Object(A.jsxs)("div",{className:"main__mail__content__subject-body",children:[Object(A.jsx)("span",{className:"main__mail__content__subject-body__subject",children:e.subject}),Object(A.jsx)("span",{className:"main__mail__content__subject-body__dash",children:" - "}),Object(A.jsx)("span",{className:"main__mail__content__subject-body__body",children:e.body})]}),Object(A.jsx)("div",{children:Object(A.jsxs)("div",{className:"main__mail__content__icons",children:["archive"===l||"trash"===l?null:Object(A.jsx)("i",{title:"Delete",className:"material-icons main__mail__content__icons__icon",children:"delete"}),"trash"===l?Object(A.jsx)("i",{title:"Restore from trash",className:"material-icons main__mail__content__icons__icon",children:"restore_from_trash"}):null,"trash"===l||"sent"===l||"archive"===l?null:Object(A.jsx)("i",{title:"Archive",className:"material-icons main__mail__content__icons__icon",children:"archive"}),"archive"===l?Object(A.jsx)("i",{title:"Unarchive",className:"material-icons main__mail__content__icons__icon",children:"unarchive"}):null,Object(A.jsx)("i",{title:"Mark as read",className:"material-icons main__mail__content__icons__icon \n                                                            ".concat(e.read?"hide":""),children:"mark_email_read"}),Object(A.jsx)("i",{title:"Mark as unread",className:"material-icons main__mail__content__icons__icon \n                                                            ".concat(e.read?"":"hide"),children:"mark_email_unread"})]})})]})]},e.id)}))},a)}))}),r?Object(A.jsx)("div",{className:"main__loading",style:{visibility:"".concat(a&&n?"visible":"hidden")},children:Object(A.jsx)(h.a,{type:"ThreeDots",color:"#fff",height:60,width:60})}):null,!r&&t.pages[0].body.length>0?Object(A.jsx)("p",{className:"main__mails-finished",children:Object(A.jsx)("b",{children:"Nothing more to load"})}):null]})},C=a(19),S=a(205),T=function(){var e=localStorage.getItem("token"),t=S.decode(e,{complete:!0}),a=new Date;try{return t.payload.exp<a.getTime()}catch(n){return!1}},P=Object(n.createContext)(),F=function(e){var t=Object(n.useState)({email:localStorage.getItem("email")}),a=Object(C.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)(T()),i=Object(C.a)(r,2),o=i[0],l=i[1];return Object(A.jsx)(P.Provider,{value:{user:{user:s,setUser:c},auth:{isAuthenticated:o,setIsAuthenticated:l}},children:e.children})},I=function(){var e=Object(O.a)(p.a.mark((function e(t){var a,n,s,c,r,i,o,l,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,s=t.user,c=s.user,r=s.setUser,i=s.setIsAuthenticated,o={headers:{"Content-Type":"application/json"}},l=JSON.stringify({email:a,password:n}),e.next=5,N.a.post("".concat("https://mail914.herokuapp.com","/api/token/"),l,o);case 5:m=e.sent,localStorage.setItem("token",m.data.access),localStorage.setItem("email",a),r(Object(x.a)(Object(x.a)({},c),{},{email:a})),i(T());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(O.a)(p.a.mark((function e(t){var a,n,s,c,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.email,s=t.password,c=t.confirmation,r={headers:{"Content-Type":"application/json"}},i=JSON.stringify({name:a,email:n,password:s,confirmation:c}),e.next=5,N.a.post("".concat("https://mail914.herokuapp.com","/api/accounts/signup"),i,r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e,t,a){localStorage.removeItem("token"),localStorage.removeItem("email"),t(Object(x.a)(Object(x.a)({},e),{},{email:""})),a(!1)},E=function(){var e=Object(n.useContext)(P),t=e.user,a=t.user,s=t.setUser,c=e.auth.setIsAuthenticated;return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("h2",{className:"main__owner-address",children:a.email}),Object(A.jsx)(i.c,{className:"btn btn-sm btn-outline-primary main__nav-btn",exact:!0,to:"/inbox",children:"Inbox"}),Object(A.jsx)(i.c,{className:"btn btn-sm btn-outline-primary main__compose-btn",to:"/compose",children:"Compose"}),Object(A.jsx)(i.c,{className:"btn btn-sm btn-outline-primary main__nav-btn",to:"/sent",children:"Sent"}),Object(A.jsx)(i.c,{className:"btn btn-sm btn-outline-primary main__nav-btn",to:"/archive",children:"Archive"}),Object(A.jsx)(i.c,{className:"btn btn-sm btn-outline-primary main__nav-btn",to:"/trash",children:"Trash"}),Object(A.jsx)(i.b,{className:"btn btn-sm btn-outline-primary main__logout-btn",to:"/logout",onClick:function(){return L(a,s,c)},children:"Log Out"}),Object(A.jsx)("hr",{className:"main__seperator"})]})},M=function(e){return Object(A.jsx)("div",{children:Object(A.jsx)("div",{className:"main",children:Object(A.jsxs)("div",{className:"container",children:[Object(A.jsx)(E,{}),Object(A.jsx)("div",{className:"container",children:e.children})]})})})},U=function(){var e=Object(O.a)(p.a.mark((function e(t){var a,n,s,c,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(C.a)(t.queryKey,2),n=a[1],(s=t.pageParam)||(s=1),c={headers:{authorization:"Bearer ".concat(localStorage.getItem("token"))}},e.next=6,N.a.get("".concat("https://mail914.herokuapp.com","/api/emails/mailbox/").concat(n,"/").concat(s),c);case 6:return r=e.sent,e.abrupt("return",r.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(j.a)(["Archive","archive"],U,{getNextPageParam:function(e){var t;return null!==(t=e.next_number)&&void 0!==t&&t}}),t=e.data,a=e.status,s=e.error,c=e.isFetching,r=e.isFetchingNextPage,i=e.fetchNextPage,l=e.hasNextPage,m=Object(n.useContext)(P),u=m.user,b=u.user,_=u.setUser,p=m.auth;return p.isAuthenticated?Object(A.jsxs)(M,{children:[Object(A.jsxs)(d.a,{children:[Object(A.jsx)("title",{children:"Archive - Mail"}),Object(A.jsx)("meta",{name:"Access all your archived mails here",content:"Archive page"})]}),Object(A.jsx)("h3",{className:"main__name",children:"Archive"}),"loading"===a?Object(A.jsx)("div",{className:"main__loading",children:Object(A.jsx)(h.a,{type:"ThreeDots",color:"#fff",height:60,width:60})}):"error"===a?Object(A.jsxs)("div",{className:"main__empty",children:["There was an error: ",s.message]}):Object(A.jsx)(k,{data:t,isFetching:c,isFetchingNextPage:r,fetchNextPage:i,hasNextPage:l,mailboxCap:"Archive",mailbox:"archive"})]}):(L(b,_,p.setIsAuthenticated),Object(A.jsx)(o.a,{to:"/logout"}))},Q=function(){var e=Object(O.a)(p.a.mark((function e(t){var a,n,s,c,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.sender,n=t.recipients,s=t.subject,c=t.composeBody,r={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}},i=JSON.stringify({sender:a,recipients:n,subject:s,body:c}),e.next=5,N.a.post("".concat("https://mail914.herokuapp.com","/api/emails/compose"),i,r).catch((function(e){throw e.response?new Error(e.response.data.error):new Error("There was an error")}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e){var t=Object(n.useContext)(P),a=t.user,s=a.user,c=a.setUser,r=t.auth,i=Object(g.a)(Q),l=i.mutateAsync,m=i.isLoading,j=Object(n.useState)({sender:s.email,recipients:"",subject:"",composeBody:""}),b=Object(C.a)(j,2),h=b[0],_=b[1],p=h.sender,O=h.recipients,v=h.subject,N=h.composeBody,y=function(e){return _(Object(x.a)(Object(x.a)({},h),{},Object(f.a)({},e.target.name,e.target.value)))};if(!r.isAuthenticated)return L(s,c,r.setIsAuthenticated),Object(A.jsx)(o.a,{to:"/logout"});return Object(A.jsxs)(M,{children:[Object(A.jsxs)(d.a,{children:[Object(A.jsx)("title",{children:"Compose - Mail"}),Object(A.jsx)("meta",{name:"You can compose and send messages in here",content:"Compose page"})]}),Object(A.jsxs)("div",{className:"main__compose",children:[Object(A.jsx)("h3",{className:"main__compose__heading",children:"New Email"}),Object(A.jsxs)("form",{onSubmit:function(t){t.preventDefault();var a=l({sender:p,recipients:O,subject:v,composeBody:N},{onSuccess:function(){e.history.push("/sent")}});u.b.promise(a,{loading:function(){return Object(A.jsxs)("span",{children:["Loading ",Object(A.jsx)("b",{children:"PLEASE WAIT!"})]})},success:function(){return u.b.remove(),Object(A.jsxs)("span",{className:"alert__span",children:["Your email has been sent ",Object(A.jsx)("b",{className:"alert__span__bold",children:"successfully "}),Object(A.jsx)("span",{className:"material-icons alert__span__icon",onClick:function(){return u.b.dismiss()},children:"close"})]})},error:function(e){return u.b.remove(),Object(A.jsxs)("span",{className:"alert__span",children:["".concat(e),Object(A.jsx)("span",{className:"material-icons alert__span__icon",onClick:function(){return u.b.dismiss()},children:"close"})]})}})},children:[Object(A.jsxs)("div",{className:"form-group main__compose__sender",children:["From:",Object(A.jsx)("input",{disabled:!0,className:"form-control main__compose__sender__inner",name:"sender",value:p})]}),Object(A.jsxs)("div",{className:"form-group main__compose__recipients",children:["To:",Object(A.jsx)("input",{autoFocus:!0,className:"form-control main__compose__recipients__inner",name:"recipients",placeholder:"Recipient(s)",value:O,onChange:y})]}),Object(A.jsx)("div",{className:"form-group main__compose__subject",children:Object(A.jsx)("input",{className:"form-control main__compose__subject__inner",placeholder:"Subject",name:"subject",value:v,onChange:y})}),Object(A.jsx)("div",{className:"form-group main__compose__body",children:Object(A.jsx)("textarea",{className:"form-control main__compose__body__inner",placeholder:"Body",name:"composeBody",onChange:y,value:N})}),Object(A.jsx)("input",{type:"submit",className:"btn btn-primary main__compose__submit-btn",disabled:m})]})]})]})},J=function(){return Object(n.useContext)(P).auth.isAuthenticated?Object(A.jsx)(o.a,{to:"/inbox"}):Object(A.jsx)(o.a,{to:"/login"})},z=function(){var e=Object(j.a)(["Inbox","inbox"],U,{getNextPageParam:function(e){var t;return null!==(t=e.next_number)&&void 0!==t&&t}}),t=e.data,a=e.status,s=e.error,c=e.isFetching,r=e.isFetchingNextPage,i=e.fetchNextPage,l=e.hasNextPage,m=Object(n.useContext)(P),u=m.user,b=u.user,_=u.setUser,p=m.auth;return p.isAuthenticated?Object(A.jsxs)(M,{children:[Object(A.jsxs)(d.a,{children:[Object(A.jsx)("title",{children:"Inbox - Mail"}),Object(A.jsx)("meta",{name:"Access all your inbox mails here",content:"Inbox page"})]}),Object(A.jsx)("h3",{className:"main__name",children:"Inbox"}),"loading"===a?Object(A.jsx)("div",{className:"main__loading",children:Object(A.jsx)(h.a,{type:"ThreeDots",color:"#fff",height:60,width:60})}):"error"===a?Object(A.jsxs)("div",{className:"main__empty",children:["There was an error: ",s.message]}):Object(A.jsx)(k,{data:t,isFetching:c,isFetchingNextPage:r,fetchNextPage:i,hasNextPage:l,mailboxCap:"Inbox",mailbox:"inbox"})]}):(L(b,_,p.setIsAuthenticated),Object(A.jsx)(o.a,{to:"/logout"}))},W=function(e){var t=e.formDetails,a=e.submitValue,n=e.onSubmit,s=e.isLoading;return Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)("form",{onSubmit:n,autoComplete:"off",children:[t.map((function(e,t){return Object(A.jsx)("div",{className:"form-group",children:Object(A.jsx)("input",{autoFocus:e.isAutoFocus,className:"form-control auth__subsection__subsection__form__input",type:e.type,placeholder:e.placeholder,name:e.name,value:e.value,onChange:e.onChange})},t)})),Object(A.jsx)("input",{className:"btn btn-primary auth__subsection__subsection__form__btn",type:"submit",value:a,disabled:s})]})})},Y=function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(C.a)(t,2),s=a[0],c=a[1],r=s.email,l=s.password,m=Object(n.useContext)(P),j=m.user,b=j.user,h=j.setUser,_=m.auth,p=_.isAuthenticated,O=_.setIsAuthenticated,v=Object(g.a)(I),N=v.mutateAsync,y=v.isLoading,w=function(e){return c(Object(x.a)(Object(x.a)({},s),{},Object(f.a)({},e.target.name,e.target.value)))},k=[{isAutoFocus:!0,type:"email",placeholder:"Email Address",name:"email",value:r,onChange:w},{isAutoFocus:!1,type:"password",placeholder:"Password",name:"password",value:l,onChange:w}];return p?Object(A.jsx)(o.a,{to:"/inbox"}):Object(A.jsxs)("div",{className:"container-fluid auth",children:[Object(A.jsxs)(d.a,{children:[Object(A.jsx)("title",{children:"Login - Mail"}),Object(A.jsx)("meta",{name:"Login to get the best messaging experience",content:"login page"})]}),Object(A.jsx)("div",{className:"auth__subsection",children:Object(A.jsx)("div",{className:"auth__subsection__subsection",children:Object(A.jsxs)("div",{className:"auth__subsection__subsection__form",children:[Object(A.jsx)("h2",{className:"auth__subsection__subsection__form__heading",children:"Login"}),Object(A.jsx)(W,{formDetails:k,submitValue:"Login",onSubmit:function(t){t.preventDefault();var a=N({email:r,password:l,user:{user:b,setUser:h,setIsAuthenticated:O}},{onSuccess:function(){e.history.push("/inbox")}});u.b.promise(a,{loading:function(){return Object(A.jsxs)("span",{children:["Loading ",Object(A.jsx)("b",{children:"PLEASE WAIT!"})]})},success:function(){return u.b.remove(),Object(A.jsxs)("span",{className:"alert__span",children:["You have ",Object(A.jsx)("b",{className:"alert__span__bold",children:"successfully "})," logged in",Object(A.jsx)("span",{className:"material-icons alert__span__icon",onClick:function(){return u.b.dismiss()},children:"close"})]})},error:function(){return u.b.remove(),Object(A.jsxs)("span",{className:"alert__span",children:["There was an ",Object(A.jsx)("b",{className:"alert__span__bold",children:"error"}),Object(A.jsx)("span",{className:"material-icons alert__span__icon",onClick:function(){return u.b.dismiss()},children:"close"})]})}})},isLoading:y}),Object(A.jsxs)("small",{className:"auth__subsection__subsection__form__small",children:["Don't have an account?",Object(A.jsx)(i.b,{className:"auth__subsection__subsection__form__small__link",to:"/register",children:"Register"})]})]})})})]})},q=function(){return Object(A.jsx)(o.a,{to:"/login"})},V=function(e){var t=Object(g.a)(D),a=t.mutateAsync,s=t.isLoading,c=Object(g.a)(I).mutateAsync,r=Object(n.useState)({name:"",email:"",password:"",confirmation:""}),l=Object(C.a)(r,2),m=l[0],j=l[1],b=m.name,h=m.email,_=m.password,p=m.confirmation,O=Object(n.useContext)(P),v=O.user,N=v.user,y=v.setUser,w=O.auth,k=w.isAuthenticated,S=w.setIsAuthenticated,T=function(e){return j(Object(x.a)(Object(x.a)({},m),{},Object(f.a)({},e.target.name,e.target.value)))},F=[{isAutoFocus:!0,type:"text",placeholder:"Full name",name:"name",value:b,onChange:T},{isAutoFocus:!1,type:"email",placeholder:"Email Address",name:"email",value:h,onChange:T},{isAutoFocus:!1,type:"password",placeholder:"Password",name:"password",value:_,onChange:T},{isAutoFocus:!1,type:"password",placeholder:"Password Again",name:"confirmation",value:p,onChange:T}];return k?Object(A.jsx)(o.a,{to:"/inbox"}):Object(A.jsxs)("div",{className:"container-fluid auth",children:[Object(A.jsxs)(d.a,{children:[Object(A.jsx)("title",{children:"Register - Mail"}),Object(A.jsx)("meta",{name:"Register to get the best messaging experience",content:"registration page"})]}),Object(A.jsx)("div",{className:"auth__subsection",children:Object(A.jsx)("div",{className:"auth__subsection__subsection",children:Object(A.jsxs)("div",{className:"auth__subsection__subsection__form",children:[Object(A.jsx)("h2",{className:"auth__subsection__subsection__form__heading",children:"Register"}),Object(A.jsx)(W,{formDetails:F,submitValue:"Register",onSubmit:function(t){if(t.preventDefault(),_!==p)u.b.remove(),u.b.error((function(e){return Object(A.jsxs)("span",{className:"alert__span",children:["Passwords ",Object(A.jsx)("b",{className:"alert__span__bold",children:"do not"})," match",Object(A.jsx)("span",{className:"material-icons alert__span__icon",onClick:function(){return u.b.dismiss(e.id)},children:"close"})]})}));else if(_.length<8)u.b.remove(),u.b.error((function(e){return Object(A.jsxs)("span",{className:"alert__span",children:["Password ",Object(A.jsx)("b",{className:"alert__span__bold",children:"must"})," be at least 8 characters long",Object(A.jsx)("span",{className:"material-icons alert__span__icon",onClick:function(){return u.b.dismiss(e.id)},children:"close"})]})}));else{var n=a({name:b,email:h,password:_,confirmation:p},{onSuccess:function(){c({email:h,password:_,user:{user:N,setUser:y,setIsAuthenticated:S}},{onSuccess:function(){e.history.push("/inbox")}})}});u.b.promise(n,{loading:function(){return Object(A.jsxs)("span",{children:["Loading ",Object(A.jsx)("b",{children:"PLEASE WAIT!"})]})},success:function(){return u.b.remove(),Object(A.jsxs)("span",{className:"alert__span",children:["You have ",Object(A.jsx)("b",{className:"alert__span__bold",children:"successfully "})," registered",Object(A.jsx)("span",{className:"material-icons alert__span__icon",onClick:function(){return u.b.dismiss()},children:"close"})]})},error:function(){return u.b.remove(),Object(A.jsxs)("span",{className:"alert__span",children:["There was an ",Object(A.jsx)("b",{className:"alert__span__bold",children:"error"}),Object(A.jsx)("span",{className:"material-icons alert__span__icon",onClick:function(){return u.b.dismiss()},children:"close"})]})}})}},isLoading:s}),Object(A.jsxs)("small",{className:"auth__subsection__subsection__form__small",children:["Already have an account?",Object(A.jsx)(i.b,{className:"auth__subsection__subsection__form__small__link",to:"/login",children:"Login"})]})]})})})]})},H=function(){var e=Object(j.a)(["Sent","sent"],U,{getNextPageParam:function(e){var t;return null!==(t=e.next_number)&&void 0!==t&&t}}),t=e.data,a=e.status,s=e.error,c=e.isFetching,r=e.isFetchingNextPage,i=e.fetchNextPage,l=e.hasNextPage,m=Object(n.useContext)(P),u=m.user,b=u.user,_=u.setUser,p=m.auth;return p.isAuthenticated?Object(A.jsxs)(M,{children:[Object(A.jsxs)(d.a,{children:[Object(A.jsx)("title",{children:"Sent - Mail"}),Object(A.jsx)("meta",{name:"Access all your sents mails here",content:"Sent page"})]}),Object(A.jsx)("h3",{className:"main__name",children:"Sent"}),"loading"===a?Object(A.jsx)("div",{className:"main__loading",children:Object(A.jsx)(h.a,{type:"ThreeDots",color:"#fff",height:60,width:60})}):"error"===a?Object(A.jsxs)("div",{className:"main__empty",children:["There was an error: ",s.message]}):Object(A.jsx)(k,{data:t,isFetching:c,isFetchingNextPage:r,fetchNextPage:i,hasNextPage:l,mailboxCap:"Sent",mailbox:"sent"})]}):(L(b,_,p.setIsAuthenticated),Object(A.jsx)(o.a,{to:"/logout"}))},K=a(319),G=function(){var e=Object(O.a)(p.a.mark((function e(t){var a,n,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(C.a)(t.queryKey,2),n=a[1],s={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},e.next=4,N.a.get("".concat("https://mail914.herokuapp.com","/api/emails/email/").concat(n),s).catch((function(e){throw e.response?new Error(e.response.data):new Error("There was an error")}));case 4:return(c=e.sent).data.recipients=c.data.recipients.join(),c.data.recipients=c.data.recipients.replace(",",", "),e.abrupt("return",c.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(O.a)(p.a.mark((function e(t){var a,n,s,c,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.action,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}},c=JSON.stringify(Object(f.a)({},n,!0)),e.next=5,N.a.put("".concat("https://mail914.herokuapp.com","/api/emails/email/").concat(a),c,s).catch((function(e){throw e.response?new Error(e.response.data):new Error("There was an error")}));case 5:return r=e.sent,e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(O.a)(p.a.mark((function e(t){var a,n,s,c,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.action,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}},c=JSON.stringify(Object(f.a)({},n,!1)),e.next=5,N.a.put("".concat("https://mail914.herokuapp.com","/api/emails/email/").concat(a),c,s).catch((function(e){throw e.response?new Error(e.response.data):new Error("There was an error")}));case 5:return r=e.sent,e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){var t=e.match.params.id,a=e.match.params.mailbox,s=Object(K.a)(["Single",t],G),c=s.data,r=s.isLoading,l=s.error,m=Object(n.useState)(!1),u=Object(C.a)(m,2),j=u[0],b=u[1],_=Object(g.a)(X,{onSettled:function(){return b(!0)}}).mutateAsync,p=Object(g.a)(Z,{onSettled:function(){return b(!0)}}).mutateAsync,x=function(e){e.preventDefault(),"delete"===e.target.innerText||"archive"===e.target.innerText||"mark_email_read"===e.target.innerText?_({id:t,action:"".concat("delete"===e.target.innerText?"trashed":"archive"===e.target.innerText?"archived":"read")}):p({id:t,action:"".concat("restore_from_trash"===e.target.innerText?"trashed":"unarchive"===e.target.innerText?"archived":"read")})};return j?Object(A.jsx)(o.a,{to:"/".concat(a)}):Object(A.jsxs)(M,{children:[Object(A.jsxs)(d.a,{children:[r?Object(A.jsx)("title",{children:"Loading | ".concat(a.replace(/^\w/,(function(e){return e.toUpperCase()}))," - Mail")}):l?Object(A.jsx)("title",{children:"Error | ".concat(a.replace(/^\w/,(function(e){return e.toUpperCase()}))," - Mail")}):Object(A.jsx)("title",{children:"".concat(c.subject," | ").concat(a.replace(/^\w/,(function(e){return e.toUpperCase()}))," - Mail")}),Object(A.jsx)("meta",{name:"Access a mail here",content:"Single mail page"})]}),Object(A.jsx)("div",{className:"container",children:Object(A.jsxs)("div",{children:[Object(A.jsx)("div",{className:"row main__commands",children:Object(A.jsxs)("div",{children:[Object(A.jsx)(i.b,{className:"main__commands__icon",title:"Go back",to:"/".concat(a),children:Object(A.jsx)("i",{className:"material-icons main__commands__icon__inner",children:"west"})}),"archive"===a||"trash"===a?null:Object(A.jsx)("button",{className:"main__commands__icon",title:"Delete",onClick:x,children:Object(A.jsx)("i",{className:"material-icons main__commands__icon__inner",children:"delete"})}),"trash"===a?Object(A.jsx)("button",{className:"main__commands__icon",title:"Restore from trash",onClick:x,children:Object(A.jsx)("i",{className:"material-icons main__commands__icon__inner",children:"restore_from_trash"})}):null,Object(A.jsx)("button",{className:"main__commands__icon",title:"Mark as unread",onClick:x,children:Object(A.jsx)("i",{className:"material-icons main__commands__icon__inner",children:"mark_email_unread"})}),"trash"===a||"sent"===a||"archive"===a?null:Object(A.jsx)("button",{className:"main__commands__icon",title:"Archive",onClick:x,children:Object(A.jsx)("i",{className:"material-icons main__commands__icon__inner",children:"archive"})}),"archive"===a?Object(A.jsx)("button",{className:"main__commands__icon",title:"Unarchive",onClick:x,children:Object(A.jsx)("i",{className:"material-icons main__commands__icon__inner",children:"unarchive"})}):null]})}),r?Object(A.jsx)("div",{className:"main__loading",children:Object(A.jsx)(h.a,{type:"ThreeDots",color:"#fff",width:60,height:60})}):l?Object(A.jsxs)("div",{className:"main__empty",children:["Error: ",l.message]}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{className:"row main__subject-reply",children:[Object(A.jsx)("h2",{children:c.subject}),Object(A.jsx)(i.b,{title:"Reply",className:"main__commands__icon",to:"/compose",children:Object(A.jsx)("i",{className:"material-icons main__commands__icon__inner",children:"reply"})})]}),Object(A.jsxs)("div",{className:"main__meta",children:[Object(A.jsxs)("div",{className:"main__meta__sender",children:["Sender: ",c.sender]}),Object(A.jsxs)("div",{className:"main__meta__recipients",children:["Recipient(s): ",c.recipients]}),Object(A.jsx)("div",{className:"main__meta__timestamp",children:Object(A.jsxs)("small",{children:["Timestamp: ",c.timestamp]})})]}),Object(A.jsx)("div",{className:"row main__body jumbotron",children:Object(A.jsx)("p",{className:"main__body__content",children:c.body})})]})]})})]})},ee=function(){var e=Object(j.a)(["Trash","trash"],U,{getNextPageParam:function(e){var t;return null!==(t=e.next_number)&&void 0!==t&&t}}),t=e.data,a=e.status,s=e.error,c=e.isFetching,r=e.isFetchingNextPage,i=e.fetchNextPage,l=e.hasNextPage,m=Object(n.useContext)(P),u=m.user,b=u.user,_=u.setUser,p=m.auth;return p.isAuthenticated?Object(A.jsxs)(M,{children:[Object(A.jsxs)(d.a,{children:[Object(A.jsx)("title",{children:"Trash - Mail"}),Object(A.jsx)("meta",{name:"Access all your trashed mails here",content:"Trash page"})]}),Object(A.jsx)("h3",{className:"main__name",children:"Trash"}),"loading"===a?Object(A.jsx)("div",{className:"main__loading",children:Object(A.jsx)(h.a,{type:"ThreeDots",color:"#fff",height:60,width:60})}):"error"===a?Object(A.jsxs)("div",{className:"main__empty",children:["There was an error: ",s.message]}):Object(A.jsx)(k,{data:t,isFetching:c,isFetchingNextPage:r,fetchNextPage:i,hasNextPage:l,mailboxCap:"Trash",mailbox:"trash"})]}):(L(b,_,p.setIsAuthenticated),Object(A.jsx)(o.a,{to:"/logout"}))},te=function(){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)(d.a,{children:[Object(A.jsx)("title",{children:"Not Found - Mail"}),Object(A.jsx)("meta",{name:"We searched up and down but could not find the page you requested",content:"Not found page"})]}),Object(A.jsxs)("div",{className:"notfound",children:[Object(A.jsx)("h1",{className:"notfound__heading",children:"404 Not Found"}),Object(A.jsx)("p",{className:"notfound__paragraph",children:"We looked up and down but could not find the link you requested"})]})]})},ae=(a(316),new l.a),ne=function(){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(F,{children:Object(A.jsx)(m.a,{client:ae,children:Object(A.jsx)(i.a,{children:Object(A.jsxs)(o.d,{children:[Object(A.jsx)(o.b,{exact:!0,path:"/login",component:Y}),Object(A.jsx)(o.b,{exact:!0,path:"/logout",component:q}),Object(A.jsx)(o.b,{exact:!0,path:"/register",component:V}),Object(A.jsx)(o.b,{exact:!0,path:"/",component:J}),Object(A.jsx)(o.b,{exact:!0,path:"/inbox",component:z}),Object(A.jsx)(o.b,{exact:!0,path:"/sent",component:H}),Object(A.jsx)(o.b,{exact:!0,path:"/archive",component:B}),Object(A.jsx)(o.b,{exact:!0,path:"/compose",component:R}),Object(A.jsx)(o.b,{exact:!0,path:"/:mailbox/:id",component:$}),Object(A.jsx)(o.b,{exact:!0,path:"/trash",component:ee}),Object(A.jsx)(o.b,{component:te})]})})})}),Object(A.jsx)(u.a,{position:"top-center",reverseOrder:!0,toastOptions:{duration:5e3,style:{maxWidth:"100%",zIndex:1e3},success:{className:"alert--success"},loading:{className:"alert--loading"},error:{className:"alert--error"}}})]})},se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,323)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};r.a.render(Object(A.jsx)(s.a.StrictMode,{children:Object(A.jsx)(ne,{})}),document.getElementById("root")),se()}},[[317,1,2]]]);
//# sourceMappingURL=main.8f7c2590.chunk.js.map